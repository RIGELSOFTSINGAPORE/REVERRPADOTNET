
@using PagedList.Mvc
@{
    var mediaDtl = ViewData["videoList"] as PagedList.PagedList<MujiStore.Models.tblMedia>;
    ViewBag.Title = MujiStore.Resources.Resource.ApprovalStatus;


    if (ViewData["CvtStatus"] == null)
    {
        ViewData["CvtStatus"] = "4";
    }
    if (ViewData["FolID"] == null)
    {
        ViewData["FolID"] = "0";
    }
    if (ViewData["MedID"] == null)
    {
        ViewData["MedID"] = "0";
    }
}
<style>
    .vid1 {
        word-break: break-all;
        line-height: 1.42857143;
        vertical-align: top;
        border-top: 1px solid #ddd;
        width: 13%;
        text-align: justify;
        padding: 8.5px;
    }

    .Folder2 {
        word-break: break-all;
        padding: 8.5px;
        line-height: 1.42857143;
        vertical-align: top;
        border-top: 1px solid #ddd;
        width: 10%;
    }

    .Description2 {
        word-break: break-all;
        line-height: 0.571429;
        vertical-align: top;
        border-top: 1px solid #ddd;
        width: 25%;
        margin-left: 0px;
        text-align: justify;
        padding: 8.5px;
    }
</style>
<br />

<h2 style="color:#ec2213; background-color:#e7bebb; margin-top:-18px; margin-left:-2px;">@MujiStore.Resources.Resource.Videoapprovalstatus</h2>
<script src="~/Scripts/select2/dist/js/jquery-3.0.0.js" type="text/javascript"></script>
<script src="~/Scripts/select2/dist/js/select2.js" defer type="text/javascript"></script>
<link href="~/Scripts/select2/dist/css/select2.min.css" rel='stylesheet' type='text/css'>

<script type="text/javascript" src="~/Scripts/jquery-1.8.3.min.js"></script>

<link rel="stylesheet" type="text/css" href="~/Content/FtpFile-pc1.css">

<link rel="stylesheet" href="~/Content/font-awesome.min.css">
<body>

    @using (Html.BeginForm("Index", "AppDisVideoList", FormMethod.Post))
    {<div class="border-style">

            <p>
                <span style="margin-left:15px;">@MujiStore.Resources.Resource.Title :</span> @Html.TextBox("SearchTitle", ViewBag.SearTitle as string, new { @class = "form-control1 form" })
                <span style="margin-left:15px;">
                    @MujiStore.Resources.Resource.VietblMediaIndexDateFrom :
                </span> @Html.TextBox("SearchFromCRTDT", String.Format("{0:d}", ViewBag.CdStDate as string),
new { @class = "datefield form-control2 form", type = "date" })
                <span style="margin-left:15px;">
                    @MujiStore.Resources.Resource.VietblMediaIndexDateTo :
                </span> @Html.TextBox("SearchToCRTDT", String.Format("{0:d}", ViewBag.CdEdDate as string),
new { @class = "datefield form-control2 form", type = "date" })
                <span style="margin-left:15px;">
                    @MujiStore.Resources.Resource.ApprovalStatus :
                </span>  @Html.DropDownList("ConvertStatus", null, new { @class = "form-control3 form1" })
                <input type="submit" value=@MujiStore.Resources.Resource.CommonSearch class="btn btn-default" style="width: 85px; margin-bottom: 6px; margin-right: 30px; float: right; margin-left: 37px; height: 32px;" />


                <br />
                <br />

            <p>

                <span style="margin-left:15px;">
                    @MujiStore.Resources.Resource.VietblMediaIndexID :
                </span>@Html.DropDownList("MediaID", null, new { @class = "form-control4 form" })
             
                <a href=@Url.Action("Index","AppDisVideoList") class="clearright">
                    @MujiStore.Resources.Resource.clear
                </a>
            </p>





        </div>
        <p style="margin-top:-36px;">
            <br />
            <br />


        </p>
        <style type="text/css">
        </style>
        if (mediaDtl.Count < 1)
        {
            <table class="table " style="background-color:#ffffff; width:100%;  margin-bottom:0px;">
                <tr>
                    <td colspan="8" style="text-align:center;background-color:#EEE; ">
                        @Html.Label(MujiStore.Resources.Resource.Novideolistforchangeapproval, MujiStore.Resources.Resource.Novideolistforchangeapproval)
                    </td>
                </tr>
            </table>
        }
        else
        {

            <table class="table " style="background-color:#ffffff; width:100%;  margin-bottom:0px;">
                <thead>
                    <tr style="background-color:#822433; color:#ffffff; width:100%">

                        <th style="width: 5%;" >
                            @Html.ActionLink(MujiStore.Resources.Resource.VietblMediaIndexID, "Index", new { sortOrder = ViewBag.MediaIDSortParm, SearTitle = ViewBag.SearTitle, CdStDate = ViewBag.CdStDate, CdEdDate = ViewBag.CdEdDate, CvtStatus = ViewBag.cvtStatus, FolID = ViewBag.FolID, MedID = ViewBag.MedID }, new { @class = "link" })
                            <span class="fa1 fa-sort fa-unsorted:before, .fa-sort:before"></span>
                        </th>

                        <th style="width:25%;">
                            @Html.ActionLink(MujiStore.Resources.Resource.VietblMediaIndexTitle, "Index", new { sortOrder = ViewBag.TitleSortParm, SearTitle = ViewBag.SearTitle, CdStDate = ViewBag.CdStDate, CdEdDate = ViewBag.CdEdDate, CvtStatus = ViewBag.cvtStatus, FolID = ViewBag.FolID, MedID = ViewBag.MedID }, new { @class = "link" })
                            <span class="fa1 fa-sort fa-unsorted:before, .fa-sort:before"></span>
                        </th>
                        
                        <th style="width: 25%;">
                            @Html.DisplayName(MujiStore.Resources.Resource.VietblMediaIndexVideo)
                        </th>
                        <th style="width: 15%; ">
                            @Html.ActionLink(MujiStore.Resources.Resource.ApprovalStatus, "Index", new { sortOrder = ViewBag.ConvertStatusSortParm, SearTitle = ViewBag.SearTitle, CdStDate = ViewBag.CdStDate, CdEdDate = ViewBag.CdEdDate, CvtStatus = ViewBag.cvtStatus, FolID = ViewBag.FolID, MedID = ViewBag.MedID }, new { @class = "link" })
                            <span class="fa1 fa-sort fa-unsorted:before, .fa-sort:before"></span>
                        </th>
                        <th style="width:13%; ">
                            @Html.ActionLink(MujiStore.Resources.Resource.Dateandtime, "Index", new { sortOrder = ViewBag.ApplicationIDSortParm, SearTitle = ViewBag.SearTitle, CdStDate = ViewBag.CdStDate, CdEdDate = ViewBag.CdEdDate, CvtStatus = ViewBag.cvtStatus, FolID = ViewBag.FolID, MedID = ViewBag.MedID }, new { @class = "link" })
                            <span class="fa1 fa-sort fa-unsorted:before, .fa-sort:before"></span>

                        </th>
                        <th style=" ">
            @Html.DisplayName(MujiStore.Resources.Resource.CommonUPDCD)

        </th>
                        
                    </tr>
                </thead>
                <tbody style="width:100%">


                    @foreach (var item in mediaDtl)
                    {
                    <tr style="background-color:#EEE; width:100%">

                        <td class="">
                            @Html.DisplayFor(modelItem => item.MediaID)
                        </td>

                        <td class="Title">
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>

                        <td class="vid1">
                            @Html.DisplayFor(modelItem => item.Video)
                        </td>
                        <td class="">
                            @if (item.ApprovalStatus == 0)
                            {
                                @Html.DisplayName(MujiStore.Resources.Resource.Disapprove)
                            }
                            else if (item.ApprovalStatus == 1)//VJ 20200603 ConvertStatus 3 Converted  Changed
                            {
                                @Html.DisplayName(MujiStore.Resources.Resource.Approved)
                            }
                            else if (item.ApprovalStatus == 3)//VJ 20200603 ConvertStatus 3 Converted  Changed
                            {
                                @Html.DisplayName(MujiStore.Resources.Resource.pending)
                            }
                        </td>
                        <td class="">
                            @Html.DisplayFor(modelItem => item.UPDDT)
                        </td>
                        <td class="Description2">
            @Html.DisplayFor(modelItem => item.UPDCD)
        </td>
                     
                    </tr>
                    }

                </tbody>

            </table>
        }

        if (mediaDtl.PageSize < mediaDtl.TotalItemCount)
        {
            <br />
            <div>

                @MujiStore.Resources.Resource.CommonPage @(mediaDtl.PageCount < mediaDtl.PageNumber ? 0 : mediaDtl.PageNumber) @MujiStore.Resources.Resource.CommonOf @mediaDtl.PageCount

                @Html.PagedListPager(mediaDtl, page => Url.Action("Index",
                     new { page, sortOrder = ViewBag.CurrentSort, SearTitle = ViewBag.SearTitle, CdStDate = ViewBag.CdStDate, CdEdDate = ViewBag.CdEdDate, CvtStatus = ViewBag.cvtStatus, FolID = ViewBag.FolID, MedID = ViewBag.MedID }))
            </div>
        }
        <br />
        <br />
    }
   
</body>
<script type="text/javascript">


    $(document).ready(function () {
        $("#FolderID").select2({
            templateResult: formatOptions
        });
       





        
    });

    function formatOptions(state) {
        $('.select2-search__field').remove();
       
        if (!state.id) { return state.text; }

        
        var strfolder = state.text;
        
        var root = strfolder.substr(1, (strfolder.length - strfolder.trim().length - 1))
        
        if (location.hostname != 'localhost') {

            var $state = $(
                '<span  style="color:black">' + root + '<img sytle="display: inline-block;" src="~/../img/folder-close1.png"  /> ' + strfolder.trim() + '</span>'
            );
        }
        else {
            var $state = $(
                '<span  style="color:black">' + root + '<img sytle="display: inline-block;" src="/../img/folder-close1.png"  /> ' + strfolder.trim() + '</span>'
            );
        }
    
        return $state;

    }
    function split_on_first_word(str) {
        str = str.trim();  // Clean string by removing beginning and ending spaces.

        var arr = [];
        var pos = str.indexOf(' ');  // Find position of first space

        if (pos === -1) {
            // No space found
            arr.push(str);                // First word (or empty)
            arr.push('');                 // Empty (no next words)
        } else {
            // Split on first space
            arr.push(str.substr(0, pos));         // First word
            arr.push(str.substr(pos + 1).trim());  // Next words
        }
        //arr = arr.substring(0, arr.length - 1);
        return arr;
    }

    function getSourceID() {
        alert($("#ParentID").val())
    }
</script>