@using Kaisokku_Common;
@model ClintUser
@{

}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>client </title>
    <style>


        .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {
            font-size: 16px !important;
            font-weight: 600 !important;
        }

        .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > td {
            padding: 15px;
        }
    </style>
</head>
<body>
    @Html.Hidden("DeleteSocialMediaId")
    @Html.HiddenFor(m => m.Id, new { id = "Id" })
    <div>
        <h1>
            Client Management
        </h1>
        <div>
            <br />
            <button type="submit" class="btn btn-primary btncreatemenu">Create New</button>
            <br />
            <br />
            <div>
                <br />
                <div style="background:white;padding:10px;">
                    <table id="ClientGrid" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0" cellpadding="5">
                        <thead>
                            <tr>

                                <th style="width:10%">ID</th>
                                <th style="width:20%">Client Name</th>
                                <th style="width:20%">Website</th>
                                @*<th style="width:30%">Descriptiion</th>*@
                                <th style="width:10%">@Kaisokku_Sales.Resources.Resource.Edit</th>
                                @*<th style="display:none">@Kaisokku_Sales.Resources.Resource.View</th>*@
                                <th style="width:10%">@Kaisokku_Sales.Resources.Resource.Delete</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>

            <!--<div style="background:white;padding:10px;">

                <table id="ClientGrid" class="table table-striped table-bordered dt-responsive nowrap dataTable no-footer dtr-inline" width="100%" cellspacing="0" cellpadding="5">
                    <thead>
                        <tr>

                            <th>client  Name</th>
                            <th>Website</th>
                            <th>Description</th>
                            <th>Edit</th>

                            <th>Delete</th>

                        </tr>
                    </thead>-->
            @*<tbody>
                    <tr>
                        <td>
                            1
                        </td>
                        <td>
                            client  1
                        </td>
                        <td>
                            www.client .com
                        </td>
                        <td style="width:40%">
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.
                        </td>

                        <td>
                            <a onclick="EditSocialMedia()">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>

                            </a>

                        </td>
                        <td>
                            <a >

                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2
                        </td>
                        <td>
                            client  2
                        </td>
                        <td>
                            www.client .com
                        </td>
                        <td style="width:40%">
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.
                        </td>

                        <td>
                            <a onclick="EditSocialMedia()">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>

                            </a>

                        </td>
                        <td>
                            <a>

                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            3
                        </td>
                        <td>
                            client  3
                        </td>
                        <td>
                            www.client .in
                        </td>
                        <td style="width:40%">
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry.
                        </td>

                        <td>
                            <a onclick="EditSocialMedia()">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>

                            </a>

                        </td>
                        <td>
                            <a>

                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>*@
            <!--</table>
            </div>-->
        </div>
    </div>
    <div class="modal fade" id="CreateSocialModal" tabindex="-1" role="dialog" aria-labelledby="CreateSocialModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="CreateSocialModalLabel">Create client</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                @*<div class="modal-body createSocialcontent">
                        CreateSocialMedia

                    </div>*@
                <div class="modal-body createSocialcontent">
                    CreateClient

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.Close</button>
                    <button type="button" class="btn btn-primary btnscreateavemenu">@Kaisokku_Sales.Resources.Resource.SaveChanges</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="EditSocialMedia" tabindex="-1" role="dialog" aria-labelledby="EditSocialMediaModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="EditSocialMediaLabel">Edit Client</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body editSocialMediacontent">
                    EditClient

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.Close</button>
                    <button type="button" class="btn btn-primary btnsaveclient">@Kaisokku_Sales.Resources.Resource.SaveChanges</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="DeleteClintModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="DeleteVideoModalLabel">@Kaisokku_Sales.Resources.Resource.DeleteImage</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body DeleteSocialcontent">
                    Are you sure you want to delete Client's Details?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.No</button>
                    <button type="button" style="background:#da291c;" class="btn btn-primary btndeletevideo btn-danger" onclick="DeleteVideo()">@Kaisokku_Sales.Resources.Resource.Yes</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="SucMSG" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-body ">
                    <label id="MSG"></label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>
</body>



</html>
@section ScriptSection{
    <script>
        function RefreshDataTable() {
            $('#ClientGrid').DataTable().ajax.reload(null, false);
            $("#ClientGrid").DataTable().page('first').draw('page');
        }
        $('.btncreatemenu').on('click', function () {

                $.ajax({
                    url: '@Url.Action("ClintCreate", "ClintMGT")',
                    type: 'GET',
                    success: function (result) {
                    
                        $('.createSocialcontent').html(result);
                        $('#CreateSocialModal').modal('show');

                    },
                    error: function (error) {
                        console.log(error);
                    }

                });
        });


        function EditSocialMedia(ID) {
            
            $.ajax({
               url: '@Url.Action("GetClientDataById", "ClintMGT")',
                type: 'POST',
                data: { 'ID': ID },
                success: function (result) {
                    
                    $('.editSocialMediacontent').html(result);
                    $('#EditSocialMedia').modal('show');
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }
          $(document).ready(function () {
            
              $("#ClientGrid").DataTable({

                  "processing": true, // for show progress bar
                  "serverSide": false, // for process server side
                  "filter": true, // this is for disable filter (search box)
                  "orderMulti": false, // for disable multiple column at once
                  "pageLength": 10,
                  language: {
                      searchPlaceholder: "ID/Client Name"
                  },

                  "ajax": {

                      "url": "@Url.Action("LoadClienddata", "ClintMGT")",
                      "type": "POST",
                      "datatype": "json"
                  },

                  "columnDefs":
                      [

                    {
                        "targets": [0],
                        //"visible": true,
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [1],
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [2],
                        "searchable": false,
                        "orderable": true
                    },
                        {
                            "targets": [3],
                            "searchable": false,
                            "orderable": false
                        },

                    {
                            "targets": [4],
                            "searchable": false,
                            "orderable": false
                        }


                    ],

                  "columns": [


                      { "data": "Id", "name": "ID", "autoWidth": false},
                      { "data": "ClientName", "name": "Client Name", "autoWidth": false },
                      { "data": "Website", "name": "Website", "autoWidth": false },
                    //{ "data": "Description", "name": "Description", "autoWidth": false },


                    {
                        "render": function (data, type, row, meta) { return "<a class='' href='javascript:void(0);' onclick=EditSocialMedia('" + row.Id + "');><span  class='glyphicon glyphicon-pencil' aria-hidden='true'></a>"; }
                    },
                    //{
                     //   "render": function (data, type, row, meta) { return "<a class='btn btn-info' style='Display:none' href='javascript:void(0);' onclick=ViewSocialMedia('" + row.SocialMediaID + "');>@Kaisokku_Sales.Resources.Resource.View</a>"; }
                    //},
                    {
                        data: null, render: function (data, type, row) {
                            return "<a href='#' class='' onclick=DeleteSocialConfirmation('" + row.Id + "'); ><span  class='glyphicon glyphicon-trash' aria-hidden='true'></span></a>";
                        }
                    },

               ]


            });

        });

        $('.btnscreateavemenu').on('click', function () {
            
            if ($('#ClintName').val() == ""&&$('#Description').val() == "" && $('#Website').val() == "" && $("#Image").get(0).files.length == 0) {
             
                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
                $('#upload').text("Please upload image File");
             }
            else if ($('#ClintName').val() == "" && $('#Description').val() == "" && $('#Website').val() == "") {
               
                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
             }
            else if ($('#ClintName').val() == "" && $('#Description').val() == "") {
               
                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
             }
            else if ($('#ClintName').val() == "") {
                document.getElementById("Cname").innerHTML = "Please Enter Clinnt Name";
                document.getElementById("site").innerHTML = "";
                document.getElementById("des").innerHTML = "";
                document.getElementById("upload").innerHTML = "";
                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("");
                $('#des').text("");
                $('#upload').text("");
             }
            else if ( $('#Description').val() == "" && $('#Website').val() == "" && $("#Image").get(0).files.length == 0) {
               
                $('#Cname').text("");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
                $('#upload').text("Please upload image File");
             }
            else if ( $('#Description').val() == "" &&  $("#Image").get(0).files.length == 0) {
         
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("Please upload image File");
             }
            else if ($('#Description').val() == "") {
         
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
            else if ( $('#Website').val() == "" && $("#Image").get(0).files.length == 0) {
               
                $('#Cname').text("");
                $('#site').text("Please Enter the Website");
                $('#des').text("");
                $('#upload').text("Please upload image File");
            }
            else if ( $('#Website').val() == "") {
                
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
            else if ( $("#Image").get(0).files.length == 0) {
           
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("");
                $('#upload').text("Please upload image File");
            }

            else {
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("");
                $('#upload').text("");
                 var ClintName = $('#ClintName').val();
                 var Website = $('#Website').val();
                 var Description = $('#Description').val();

                 var Image = $("#Image").get(0).files;
                 var fileData = new FormData();

                 for (var i = 0; i < Image.length; i++) {
                     fileData.append("Image", Image[i]);
                 }
                 fileData.append('ClintName', ClintName)
                 fileData.append('Image', Image)
                 fileData.append('Website', Website)
                 fileData.append('Description', Description)

                 $('#CreateSocialModal').modal('hide');
                 $.ajax({
                     url: '@Url.Action("SaveClient", "ClintMGT")',
                     type: 'POST',
                     contentType: false,
                     processData: false,
                     data: fileData,
                     success: function (result) {

                         if (result.errorcode == 0) {
 
                             RefreshDataTable()
                             $('#MSG').text("Client created Successfully")
                             $("#SucMSG").modal('show');
                         }
                         else {
                           
                             RefreshDataTable()
                             $('#MSG').text("Client created failed")
                             $("#SucMSG").modal('show');
                         }
                     },
                     error: function (error) {
                         console.log(error);
                     }

                 });
             }

        });
        $('.btnsaveclient').on('click', function () {
            
            if ($('#ClintName').val() == "" && $('#Description').val() == "" && $('#Website').val() == "" ) {

                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
              
            }
            else if ($('#ClintName').val() == "" && $('#Description').val() == "" && $('#Website').val() == "") {

                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
            else if ($('#ClintName').val() == "" && $('#Description').val() == "") {

                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
            else if ($('#ClintName').val() == "") {
                document.getElementById("Cname").innerHTML = "Please Enter Clinnt Name";
                document.getElementById("site").innerHTML = "";
                document.getElementById("des").innerHTML = "";
                document.getElementById("upload").innerHTML = "";
                $('#Cname').text("Please Enter the Client Name");
                $('#site').text("");
                $('#des').text("");
                $('#upload').text("");
            }
            else if ($('#Description').val() == "" && $('#Website').val() == "") {

                $('#Cname').text("");
                $('#site').text("Please Enter the Website");
                $('#des').text("Please Enter the Description");
               
            }
            else if ($('#Description').val() == "" ) {

                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
               
            }
            else if ($('#Description').val() == "") {

                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
            else if ($('#Website').val() == "" ) {

                $('#Cname').text("");
                $('#site').text("Please Enter the Website");
                $('#des').text("");
                
            }
            else if ($('#Website').val() == "") {

                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("Please Enter the Description");
                $('#upload').text("");
            }
           

            else {
                
                $('#Cname').text("");
                $('#site').text("");
                $('#des').text("");
                $('#upload').text("");
            
                var ClintName = $('#ClintName').val();
                var Website = $('#Website').val();
            var Id = $('#clientid').val();
                var Description = $('#Description').val();
                var img = "";
                if ($("#Image").get(0).files.length == 0) {
                      img = $('#Img').val();
                }
                else {
                     img ="Noimg";
                }
        
                    var Image = $("#Image").get(0).files;
               
               
                var fileData = new FormData();

                for (var i = 0; i < Image.length; i++) {
                    fileData.append("Image", Image[i]);
                }
                fileData.append('ClintName', ClintName)
                fileData.append('Image', Image)
                fileData.append('Website', Website)
                fileData.append('Description', Description)
                fileData.append('Id', Id)
                fileData.append('img', img)
                $('#EditSocialMedia').modal('hide');
                $.ajax({
                    url: '@Url.Action("SaveClientListData", "ClintMGT")',
                    type: 'POST',
                    contentType: false,
                    processData: false,
                    data: fileData,
                    success: function (result) {

                        if (result.errorcode == 0) {
                           
                            RefreshDataTable()
                            $('#MSG').text("Client Updated Successfully")
                            $("#SucMSG").modal('show');
                        }
                        else {
                           
                            RefreshDataTable()
                            $('#MSG').text("Client Updated Failed")
                            $("#SucMSG").modal('show');
                        }
                    },
                    error: function (error) {
                        console.log(error);
                    }

                });

            }

            });
         function DeleteSocialConfirmation(Id) {

            //$('#DeleteSocialId').val(SocialMediaID);
             $('#Id').val(Id);

            $('#DeleteClintModal').modal('show');
        }

        function DeleteVideo() {

            var Id = $('#Id').val();
            $('#DeleteClintModal').modal('hide');
            $.ajax({
                url: '@Url.Action("DeleteClientById", "ClintMGT")',
                type: 'POST',
                data: { 'Id': Id },
                success: function (result) {
                    if (result.errorcode == 0) {
                        RefreshDataTable()
                        $('#MSG').text("Client Deleted Successfully")
                        $("#SucMSG").modal('show');
                       
                    
                    }
                    else {
                        RefreshDataTable()
                        $('#MSG').text("Client Updated Successfully")
                        $("#SucMSG").modal('show');
                       
                    }
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }

    </script>
}
