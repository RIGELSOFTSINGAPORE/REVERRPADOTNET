
@using Kaisokku_Common;
@model SocialMediaGrid
@{ }


@{
    ViewBag.Title = "SocialMedia";
}


@*<style>
        .imgtd {
            width: 100px;
            padding-left: 15px;
            padding-top: 10px;
        }

        .SocialMedia {
            border-radius: 9px;
            border-style: solid;
            /* border-width: 3px; */
            border-color: #fcf8e3;
            padding: 4px 8px;
            margin: 2px 0;
            overflow-wrap: break-word;
            font-size: 19px;
            color: white;
            background-color: #512063;
        }
    </style>*@
@Html.Hidden("DeleteSocialMediaId")
@Html.HiddenFor(m => m.SocialMediaID, new { id = "socialMediaId" })
<h2 class="SocialMedia">@Kaisokku_Sales.Resources.Resource.SocialMedia</h2>


<button type="submit" class="btn btn-primary btncreatemenu">@Kaisokku_Sales.Resources.Resource.CreateNewImages</button>


@if (TempData["Message"] != null && TempData["Message"].ToString() != "")
{
    <div class="container">

        @if (TempData["ErrorCode"] != null && TempData["ErrorCode"].ToString() == "1")
        {
            <div class="row">
                <div class="col-md-4" style="padding-left: 0px;padding-top: 10px;">
                    <div class="alert alert-success alert-dismissible ">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong>Success!</strong> @TempData["Message"].ToString()
                    </div>
                </div>
            </div>

        }
        else
        {
            <div class="row">
                <div class="col-md-4" style="padding-left: 0px;padding-top: 10px;">
                    <div class="alert alert-danger alert-dismissible ">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong>Danger!</strong> @TempData["Message"].ToString()
                    </div>
                </div>
            </div>

        }

    </div>

}

<div class="container">
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="SocialGrid" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0" cellpadding="5">
            <thead>
                <tr>
                    <th>SocialMediaID</th>
                    <th>@Kaisokku_Sales.Resources.Resource.Title</th>
                    <th>@Kaisokku_Sales.Resources.Resource.URL</th>
                    <th>@Kaisokku_Sales.Resources.Resource.FileName</th>
                    <th>@Kaisokku_Sales.Resources.Resource.Edit</th>
                    <th>@Kaisokku_Sales.Resources.Resource.View</th>
                    <th>@Kaisokku_Sales.Resources.Resource.Delete</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<div class="modal fade" id="CreateSocialModal" tabindex="-1" role="dialog" aria-labelledby="CreateSocialModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="CreateSocialModalLabel">@Kaisokku_Sales.Resources.Resource.CreateUploadImage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            @*<div class="modal-body createSocialcontent">
                    CreateSocialMedia

                </div>*@
            <div class="modal-body createSocialcontent">
                CreateSocialModal

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.Close</button>
                <button type="button" class="btn btn-primary btnscreateavemenu">@Kaisokku_Sales.Resources.Resource.SaveChanges</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal EditSocialMedia -->
<div class="modal fade" id="EditSocialMedia" tabindex="-1" role="dialog" aria-labelledby="EditSocialMediaModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="EditSocialMediaLabel">@Kaisokku_Sales.Resources.Resource.EditImage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body editSocialMediacontent">
                EditSocialModal

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.Close</button>
                <button type="button" class="btn btn-primary btnsavesocialmedia">@Kaisokku_Sales.Resources.Resource.SaveChanges</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal ViewsocialMedia -->
<div class="modal fade" id="ViewSocialModal" tabindex="-1" role="dialog" aria-labelledby="ViewVideoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ViewVideoModalLabel">@Kaisokku_Sales.Resources.Resource.ViewImage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body ViewSocialcontent">
                ViewSocialModal

            </div>
            @*<div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary btnsavemenu">Save changes</button>
                </div>*@
        </div>
    </div>
</div>




<!-- Modal DeleteSocialMedia -->
<div class="modal fade" id="DeleteSocialModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="DeleteVideoModalLabel">@Kaisokku_Sales.Resources.Resource.DeleteImage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body DeleteSocialcontent">
                @Kaisokku_Sales.Resources.Resource.AreyousureyouwanttodeleteImage

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@Kaisokku_Sales.Resources.Resource.No</button>
                <button type="button" class="btn btn-primary btndeletevideo btn-danger" onclick="DeleteVideo()">@Kaisokku_Sales.Resources.Resource.Yes</button>
            </div>
        </div>
    </div>
</div>


@section ScriptSection
{
    <script>

        function RefreshDataTable() {
            //debugger;
            $('#SocialGrid').DataTable().ajax.reload(null, false);
            $("#SocialGrid").DataTable().page('first').draw('page');
            //mApp.unblock('#dltpopup .modal-content');
            //mApp.unblockPage();
        }


        $(document).ready(function () {
            //debugger;
           $("#SocialGrid").DataTable({
              
                //"processing": true, // for show progress bar
                //"serverSide": false, // for process server side
                //"filter": true, // this is for disable filter (search box)
                //"orderMulti": false, // for disable multiple column at once
                //"pageLength": 5,

                "ajax": {

                    "url":  "@Url.Action("LoadSocialMediaListData", "Home")",
                    "type": "POST",
                    "datatype": "json"
                },

                "columnDefs":
                    [{
                        "targets": [0],
                        "visible": false,
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [1],
                        //"visible": true,
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [2],
                        "searchable": false,
                        "orderable": true
                    },
                    {
                        "targets": [3],
                        "searchable": false,
                        "orderable": false
                    },
                        {
                            "targets": [4],
                            "searchable": false,
                            "orderable": false
                        },

                    {
                            "targets": [5],
                            "searchable": false,
                            "orderable": false
                        },
                        {
                            "targets": [6],
                            "searchable": false,
                            "orderable": false
                        }


                    ],


                "columns": [
                    { "data": "SocialMediaID", "name": "SocialMediaID", "autoWidth": true },
                    { "data": "Title", "name": "Title", "autoWidth": true },
                    { "data": "URL", "name": "URL", "autoWidth": true },
                    { "data": "Filename", "name": "Filename", "autoWidth": true },


                    {
                        "render": function (data, type, row, meta) { return "<a class='btn btn-info' href='javascript:void(0);' onclick=EditSocialMedia('" + row.SocialMediaID + "');>@Kaisokku_Sales.Resources.Resource.Edit</a>"; }
                    },
                    {
                        "render": function (data, type, row, meta) { return "<a class='btn btn-info' href='javascript:void(0);' onclick=ViewSocialMedia('" + row.SocialMediaID + "');>@Kaisokku_Sales.Resources.Resource.View</a>"; }
                    },
                    {
                        data: null, render: function (data, type, row) {
                            return "<a href='#' class='btn btn-danger' onclick=DeleteSocialConfirmation('" + row.SocialMediaID + "'); >@Kaisokku_Sales.Resources.Resource.Delete</a>";
                        }
                    },

                ]


            });

        });

           $('.btncreatemenu').on('click', function () {

                $.ajax({
                    url: '@Url.Action("CreateSocialMediaListdata", "Home")',
                    type: 'GET',
                    //contentType: false,
                    //processData: false,
                    //data:  fileData ,
                    success: function (result) {
                       
                        $('.createSocialcontent').html(result);
                        $('#CreateSocialModal').modal('show');


                    },
                    error: function (error) {
                        console.log(error);
                    }

                });
           });
            //Edit Images

        $('.btnsavesocialmedia').on('click', function () {
            if ($('#EditSocialMediaId').val() == "") {
                document.getElementById("demo").innerHTML = "Please enter ID";
            }
            else if ($('#EditSocialMediaTitle').val() == "") {
                document.getElementById("demo").innerHTML = "Please enter Title";
            }
            else if ($('#EditSocialMediaUrl').val() == "") {
                document.getElementById("demo").innerHTML = "Please enter URL";
            }
            else {
                var SocialMediaId = $('#EditSocialMediaId').val();
                var Title = $('#EditSocialMediaTitle').val();
                var URL = $('#EditSocialMediaUrl').val();
                var Filename = $('#EditSocialMediaFile').get(0).files;

                var fileData = new FormData();

                for (var i = 0; i < Filename.length; i++) {
                    fileData.append("EditSocialMediaFile", Filename[i]);
                }
                fileData.append('SocialMediaId', SocialMediaId)
                fileData.append('Title', Title)
                fileData.append('URL', URL)
                fileData.append('Filename', Filename)
                $('#EditSocialMedia').modal('hide');
                $.ajax({
                    url: '@Url.Action("SaveSocialMediaListData", "Home")',
                    type: 'POST',
                    contentType: false,
                    processData: false,
                    data: fileData,
                    success: function (result) {

                        if (result.errorcode == 0) {
                            alert('@Kaisokku_Sales.Resources.Resource.ImageUpdateSuccessfully');
                            RefreshDataTable();
                        }
                        else {
                            alert('@Kaisokku_Sales.Resources.Resource.ImageUpdatefailed');
                        }
                    },
                    error: function (error) {
                        console.log(error);
                    }

                });

            }

            });
        //ViewSOcialMedia
        function ViewSocialMedia(SocialMediaID) {

            $.ajax({
                url: '@Url.Action("ViewSocialListDataById", "Home")',
                type: 'POST',
                data: { 'SocialMediaID': SocialMediaID },
                success: function (result) {

                    //$('#videofiles').empty();
                    //$('#videofiles').append("<option value='0'>--Select--</option>");
                    //$.each(result, function () {
                    //    videofiles.append($("<option></option>").val(this['Value']).html(this['Text']));
                    //});
                    $('.ViewSocialcontent').html(result);
                    $('#ViewSocialModal').modal('show');
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }



         $('.btnscreateavemenu').on('click', function () {
             if ($('#CreateSocialTitle').val() == "" && $('#CreateSocialUrl').val() == "" && $("#CreateSocialFile").get(0).files.length == 0) {
                 document.getElementById("title").innerHTML = "Please enter Title";
                 document.getElementById("des").innerHTML = "Please enter Description";
                 document.getElementById("upload").innerHTML = "Please upload Video File";
             }
             else if ($('#CreateSocialTitle').val() != "" && $('#CreateSocialUrl').val() == "" && $("#CreateSocialFile").get(0).files.length == 0) {
                 document.getElementById("title").innerHTML = "";
                 document.getElementById("des").innerHTML = "Please enter Description";
                 document.getElementById("upload").innerHTML = "Please upload Video File";
             }
             else if ($('#CreateSocialTitle').val() != "" && $('#CreateSocialUrl').val() != "" && $("#CreateSocialFile").get(0).files.length == 0) {
                 document.getElementById("title").innerHTML = "";
                 document.getElementById("des").innerHTML = "";
                 document.getElementById("upload").innerHTML = "Please upload Video File";
             }
             else if ($('#CreateSocialTitle').val() == "" && $('#CreateSocialUrl').val() == "" && $("#CreateSocialFile").get(0).files.length != 0) {
                 document.getElementById("title").innerHTML = "Please enter Title";
                 document.getElementById("des").innerHTML = "Please enter Description";
                 document.getElementById("upload").innerHTML = "";
             }
             else if ($('#CreateSocialTitle').val() != "" && $('#CreateSocialUrl').val() == "" && $("#CreateSocialFile").get(0).files.length != 0) {
                 document.getElementById("title").innerHTML = "";
                 document.getElementById("des").innerHTML = "Please enter Description";
                 document.getElementById("upload").innerHTML = "";
             }
             else if ($('#CreateSocialTitle').val() == "" && $('#CreateSocialUrl').val() != "" && $("#CreateSocialFile").get(0).files.length != 0) {
                 document.getElementById("title").innerHTML = "Please enter Title";
                 document.getElementById("des").innerHTML = "";
                 document.getElementById("upload").innerHTML = "";
             }
             else if ($('#CreateSocialTitle').val() == "" && $('#CreateSocialUrl').val() != "" && $("#CreateSocialFile").get(0).files.length == 0) {
                 document.getElementById("title").innerHTML = "Please enter Title";
                 document.getElementById("des").innerHTML = "";
                 document.getElementById("upload").innerHTML = "Please upload Video File";
             }

             else {
                 var Title = $('#CreateSocialTitle').val();
                 var ImageUrl = $('#CreateSocialUrl').val();

                 var updateVideoFile = $("#CreateSocialFile").get(0).files;
                 var fileData = new FormData();

                 for (var i = 0; i < updateVideoFile.length; i++) {
                     fileData.append("CreateSocialFile", updateVideoFile[i]);
                 }
                 fileData.append('Title', Title)
                 fileData.append('ImageUrl', ImageUrl)

                 $('#CreateSocialModal').modal('hide');
                 $.ajax({
                     url: '@Url.Action("SaveCreateSocialMediaData", "Home")',
                     type: 'POST',
                     contentType: false,
                     processData: false,
                     data: fileData,
                     success: function (result) {

                         if (result.errorcode == 0) {
                             alert('@Kaisokku_Sales.Resources.Resource.ImageUploadSuccessfully');
                             RefreshDataTable();
                         }
                         else {
                             alert('@Kaisokku_Sales.Resources.Resource.ImageCreationFailed');
                         }
                     },
                     error: function (error) {
                         console.log(error);
                     }

                 });
             }

          });

        function DeleteSocialConfirmation(SocialMediaID) {
            //debugger;
            //$('#DeleteSocialId').val(SocialMediaID);
            $('#socialMediaId').val(SocialMediaID);
            $('#DeleteSocialModal').modal('show');
        }

        function DeleteVideo() {
            //debugger;
            var SocialMediaID = $('#socialMediaId').val();
            $('#DeleteSocialModal').modal('hide');
            $.ajax({
                url: '@Url.Action("DeleteSocialMediaById", "Home")',
                type: 'POST',
                data: { 'SocialMediaID': SocialMediaID },
                success: function (result) {
                    if (result.errorcode == 0) {

                        alert('@Kaisokku_Sales.Resources.Resource.ImageDeletedSuccessfully');
                        RefreshDataTable();
                    }
                    else {
                        alert('@Kaisokku_Sales.Resources.Resource.ImageDeletionFailed');
                    }
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }


        function EditSocialMedia(SocialMediaID) {
            //debugger;
            $.ajax({
                url: '@Url.Action("GetSocialMediaListDataById", "Home")',
                type: 'POST',
                data: { 'SocialMediaID': SocialMediaID },
                success: function (result) {
                    //debugger;
                    $('.editSocialMediacontent').html(result);
                    $('#EditSocialMedia').modal('show');
                },
                error: function (error) {
                    console.log(error);
                }
            });
        }





    </script>
}


