

@model Kaisokku_Common.Tasks

@{
    /**/

    /**/

    ViewBag.Title = "TaskManagement";
}

@Html.Hidden("DeleteVideoId")
<h2>Kaisokku Sample Task Report</h2>
<div class="row">
    @*<div class="col-md-2">
        @Html.Label("User Name")
    </div>
    <div class="col-md-4">
        @Html.DropDownListFor(model => model.userid, TempData["SelectUser"] as SelectList, "-Select-", new { @id = "dp" })
        @{TempData.Keep("SelectUser");}
    </div>*@


</div>
<div class="row" style="padding-top: 12px;">
    <div class="col-md-5">

    </div>
    @*<div class="col-md-3">
        <input type="button" value="Search" class="btn btn-primary" id="btnscreateavemenu" name="Command" />
    </div>*@
    @*<input type="submit" value="submit" id="btnsubmitemailfrom" name="Command" hidden="hidden" /><br />*@

</div>
<br />


<div class="container" style="border: 0px solid;">
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="TaskGrid" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0" cellpadding="5">
            <thead>
                <tr style="background-color:#512063">
                    <th>TaskId</th>
                    <th>Task</th>
                    <th>Description</th>
                    <th></th>

                </tr>
            </thead>
        </table>
    </div>
</div>

@section ScriptSection
{
    <script>
            function RefreshDataTable() {
                //debugger;
                $('#TaskGrid').DataTable().ajax.reload(null, false);
                $("#TaskGrid").DataTable().page('first').draw('page');
            //mApp.unblock('#dltpopup .modal-content');
            //mApp.unblockPage();
        }
        $(document).ready(function () {
            //debugger;
            $("#TaskGrid").DataTable({

                "processing": true, // for show progress bar
                "serverSide": false, // for process server side
                "filter": true, // this is for disable filter (search box)
                "orderMulti": false, // for disable multiple column at once
                "pageLength": 5,

                "ajax": {
                    
                     url: '@Url.Action("LoadTaskListDatas", "Home")',
                    "type": "POST",
                    "datatype": "json"
                },

                "columnDefs":
                    [{
                        "targets": [0],
                        "visible": false,
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [1],
                        //"visible": true,
                        "searchable": true,
                        "orderable": true
                    },
                    {
                        "targets": [2],
                        "searchable": false,
                        "orderable": true
                    },
                    {
                        "targets": [3],
                        "searchable": false,
                        "orderable": false,
                        "visible": true
                    },
                    //{
                    //    "targets": [4],
                    //    "searchable": false,
                    //    "orderable": false
                    //},
                    //{
                    //    "targets": [5],
                    //    "searchable": false,
                    //    "orderable": false
                    //    }
                    //{
                    //        "targets": [6],
                    //        "searchable": false,
                    //        "orderable": false
                    //    }
                        //{
                        //    "targets": [7],
                        //    "searchable": false,
                        //    "orderable": false
                        //}
                        //{
                        //    "targets": [8],
                        //    "searchable": false,
                        //    "orderable": false
                        //}

                    ],


                "columns": [
                    { "data": "TaskMasterId", "name": "TaskMasterId", "autoWidth": true },
                    { "data": "TaskName", "name": "TaskName", "autoWidth": true },
                    { "data": "TaskDescription", "name": "TaskDescription", "autoWidth": true },
                   // { "data": "Filename", "name": "Filename", "autoWidth": true },

                    {
                        data: null, render: function (data, type, row) {
                            return "<a href='#' class='btn'>Demo</a>";
                        }
                    },
                  //  { "data": "Viewcount", "name": "Viewcount", "autoWidth": true },



                ]

            });
         

           
            $('#btnscreateavemenu').on('click', function () {
                //debugger;
                $("#TaskGrid").DataTable().destroy();
                $("#TaskGrid").DataTable({

                    "processing": true, // for show progress bar
                    "serverSide": false, // for process server side
                    "filter": true, // this is for disable filter (search box)
                    "orderMulti": false, // for disable multiple column at once
                    "pageLength": 5,

                    "ajax": {
                       
                        url: '@Url.Action("LoadTaskList", "Home")',

                        "type": "POST",
                        "datatype": "json",
                        "data": { 'Userid': $('#dp option:selected').val() },
                    },

                    "columnDefs":
                        [{
                            "targets": [0],
                            "visible": false,
                            "searchable": true,
                            "orderable": true
                        },
                        {
                            "targets": [1],
                            //"visible": true,
                            "searchable": true,
                            "orderable": true
                        },
                        {
                            "targets": [2],
                            "searchable": false,
                            "orderable": true
                        },
                        {
                            "targets": [3],
                            "searchable": false,
                            "orderable": false
                        },
                            //{
                            //    "targets": [4],
                            //    "searchable": false,
                            //    "orderable": false
                            //},
                            //{
                            //    "targets": [5],
                            //    "searchable": false,
                            //    "orderable": false
                            //    }
                            //{
                            //        "targets": [6],
                            //        "searchable": false,
                            //        "orderable": false
                            //    }
                            //{
                            //    "targets": [7],
                            //    "searchable": false,
                            //    "orderable": false
                            //}
                            //{
                            //    "targets": [8],
                            //    "searchable": false,
                            //    "orderable": false
                            //}

                        ],


                    //"columns": [
                    //    { "data": "TaskMasterId", "name": "TaskMasterId", "autoWidth": true },
                    //    { "data": "TaskName", "name": "TaskName", "autoWidth": true },
                    //    { "data": "TaskDescription", "name": "TaskDescription", "autoWidth": true },
                    //    // { "data": "Filename", "name": "Filename", "autoWidth": true },

                    //    {
                    //        data: null, render: function (data, type, row) {
                    //            return "<a href='#'>Delete</a>";
                    //        }
                    //    },


                    //]
                    "columns": [
                        { "data": "TaskMasterId", "name": "TaskMasterId", "autoWidth": true },
                        { "data": "TaskName", "name": "TaskName", "autoWidth": true },
                        { "data": "TaskDescription", "name": "TaskDescription", "autoWidth": true },
                        // { "data": "Filename", "name": "Filename", "autoWidth": true },

                        //{ "data": "userid", "name": "userid", "autoWidth": true },
                        //  { "data": "Viewcount", "name": "Viewcount", "autoWidth": true },

                        {
                            "render": function (data, type, row, meta) { return "<a class='btn btn-info' href='javascript:void(0);' onclick=EditVideo('" + row.TaskMasterId + "');>Edit</a>"; }
                        },
                        //{
                        //    "render": function (data, type, row, meta) { return "<a class='btn btn-info' href='javascript:void(0);' onclick=ViewVideo('" + row.MediaID + "');>View</a>"; }
                        //},
                        {
                            data: null, render: function (data, type, row) {
                                return "<a href='#' class='btn btn-danger' onclick=DeleteVideoConfirmation('" + row.TaskMasterId + "'); >Delete</a>";
                            }
                        },

                    ]

                });
                
            });
           
        });     

        
    </script>
}
