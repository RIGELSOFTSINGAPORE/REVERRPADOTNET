
@{
    ViewBag.Title = "Upload";
}

<h2 style="margin:0 auto;padding-left:32px">Upload</h2>
<div class="container" style="width:95%; margin:0 auto;border: 1px solid;padding-top:15px;padding-bottom:15px;border-radius: 15px;">

    <div>
        <div class="col-md-2" style="font-size:16px">
            @Html.Label("File")
        </div>
        <div class="col-md-4">
            <input type="file" class="form-control" id="CreateVideoFile" multiple aria-describedby="updatedby">
        </div>
    </div>
    <div class="row" style="padding-top: 15px;">
        @*<div class="col-md-1">

            </div>*@
        <div class="col-md-2" style="padding-left:30px">
            <button type="button" class="btn alert-twitter btnsavemenu">Upload</button>
        </div>
        @*<input type="submit" value="submit" id="btnsubmitemailfrom" name="Command" hidden="hidden" /><br />*@
        <br />
    </div>

</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-2.2.4.min.js"></script>

<script src="~/Scripts/Datatable/datatables.min.js"></script>
<script src="~/Scripts/Datatable/jquery.dataTables.min.js"></script>
<script src="~/Scripts/Datatable/datatables.bootstrap.min.js"></script>
<script src="~/Scripts/Datatable/sum.js"></script>
<script src="~/js-toast-master/toast.js"></script>
<script src="~/js-toast-master/toast.min.js"></script>
 
    
<script>
    'use strict';

    function showalertToast(toast) {
        iqwerty.toast.toast(toast, {
            style: {
                main: {
                    'background': 'Red',
                    'color': 'White',
                },
            },
        });
    }
    function showSucessToast(toast) {
        iqwerty.toast.toast(toast, {
            style: {
                main: {
                    'background': 'Green',
                    'color': 'White',
                },
            },
        });
    }
    $('.btnsavemenu').on('click', function () {
        //debugger;
        var updateVideoFile = $('#CreateVideoFile').get(0).files;

        var fileData = new FormData();

        for (var i = 0; i < updateVideoFile.length; i++) {
            fileData.append("CreateVideoFile", updateVideoFile[i]);
        }


        $.ajax({
            url: '@Url.Action("SaveFileData", "Home")',
            type: 'POST',
            contentType: false,
            processData: false,
            data: fileData,
            success: function (result) {

                if (result.errorcode == 0) {
                    showSucessToast('File Uploaded Successfully');
                    RefreshDataTable();
                }
                else {
                    showalertToast('File Updation Failed.');
                }
            },
            error: function (error) {
                console.log(error);
            }

        });
    });

</script>
